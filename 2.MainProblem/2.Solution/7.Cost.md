# Стоимость владения системой

## Оценка нагрузки на БД
По исходным данным, cреднее число заказов в сутки в ресторанах достигает 20,000 которое продолжает расти.

Примем за рост числа заказов 20% в год, т.е. в течении 5 ближайших лет составит 50,000 заказов в сутки.

Для предложенной архитектуры не требуется больших вычислительных ресурсов.
Однако, для хранения всех действий клиентов и статусов, необходимо учесть хранение всех этих событий.

Оценочно число записей различных событий изменений статусов заказов составляет в сутки:

50,000 (заказов в сутки) * 10 (событий смены статусов) = 500,000 записей в сутки.

или<br />

500,000 (записей) * 5 (лет) * 365 (дней) ~= 1 млрд. записей.

В данном случае нагрузка на БД не является существенной. Однако стоит учесть
- сценарии поиска информации по заказам
- деградацию базы данных с увеличением числа заказов

## Оценка количества посетителей
С учетом планируемого числа поключенных ресторанов - 100, рассмотрим вероятное число пользователей в единицу времени.
В каждом ресторане работает до 10 человек, который (пусть) может одновременно обслужить 2 столика.
Суммарное число обращений к сайту официантами:

100 (ресторанов) * 10 (официантов) * (2 столиков) = 2,000 обращений к веб-ресурсу и API в пиковом моменте (RPS).

Для этого целесообразно иметь гибко настроенный кластер Kubernetes с динамическим распределением ресурсов и горизонтальным масштабированием экземпляров приложений.

**Оценка (минимальной) стоимости**
- Сервисы x10 (10 сервисов) - 1Ghz 2CPU, 4Gb RAM, 10Gb HDD
- Nginx - 3Ghz 1CPU, 2Gb RAM, 20Gb HDD
- Kafka - 2Ghz 4CPU, 16Gb RAM, 1Tb HDD
- Database X4 (для каждого сервиса) - 1Ghz 2CPU, 2Gb RAM, 100Gb HDD

Следует также учесть затраты:
- на инфраструктуру: виртуализацию (Docker) и оркестрацию (k8s)
- на мониторинг (ELK, Grafana)
- подсистему хранения файлов (S3 Minio)

В решении (за отсутствием данных) не учтены:
- механизмы репликации и кластеризации данных БД